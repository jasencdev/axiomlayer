apiVersion: v1
kind: ConfigMap
metadata:
  name: litestream-config
  namespace: campfire
  labels:
    app.kubernetes.io/name: campfire
    app.kubernetes.io/component: backup
    app.kubernetes.io/part-of: homelab
    app.kubernetes.io/managed-by: argocd
data:
  litestream.yml: |
    dbs:
      - path: /rails/storage/production.sqlite3
        replicas:
          - type: s3
            bucket: litestream-backups
            path: campfire
            endpoint: http://minio.minio.svc:9000
            force-path-style: true
